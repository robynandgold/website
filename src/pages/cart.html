<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Your Cart — Robyn &amp; Gold</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content="View the antique jewellery pieces currently in your Robyn &amp; Gold cart."
  />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600&family=Inter:wght@300;400;500;600&display=swap"
    rel="stylesheet"
  />

  <link rel="stylesheet" href="../css/styles.css" />
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png" />
  <link rel="manifest" href="/images/site.webmanifest" />
</head>
<body class="page">
  <header class="site-header">
    <div class="container header-inner">
      <div class="brand-banner">
        <div class="brand-center">
          <img src="../images/logo.png" alt="Robyn & Gold" />
          <a href="/" class="brand-main">Robyn &amp; Gold</a>
          <span class="brand-tagline">Antique Jewellery</span>
        </div>
      </div>

      <nav class="nav">
        <a href="/pages/shop.html" class="nav-link">Shop</a>
        <a href="/index.html#about" class="nav-link">Our story</a>
        <a href="/index.html#ethos" class="nav-link">Ethos</a>
        <a href="/pages/cart.html" class="nav-link nav-link--cart">
          Cart
          <span id="cart-count" class="cart-count">0</span>
        </a>
        <a href="https://www.instagram.com/robynandgold/" target="_blank" rel="noopener" class="nav-link nav-link--icon" aria-label="Instagram">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M12 2.2c3.2 0 3.6 0 4.9.1 1.2.1 1.9.2 2.3.4.6.2 1 .5 1.5 1 .5.5.8.9 1 1.5.2.4.3 1.1.4 2.3.1 1.3.1 1.7.1 4.9s0 3.6-.1 4.9c-.1 1.2-.2 1.9-.4 2.3-.2.6-.5 1-1 1.5-.5.5-.9.8-1.5 1-.4.2-1.1.3-2.3.4-1.3.1-1.7.1-4.9.1s-3.6 0-4.9-.1c-1.2-.1-1.9-.2-2.3-.4-.6-.2-1-.5-1.5-1-.5-.5-.8-.9-1-1.5-.2-.4-.3-1.1-.4-2.3C2.2 15.6 2.2 15.2 2.2 12s0-3.6.1-4.9c.1-1.2.2-1.9.4-2.3.2-.6.5-1 1-1.5.5-.5.9-.8 1.5-1 .4-.2 1.1-.3 2.3-.4C8.4 2.2 8.8 2.2 12 2.2zm0 2.2c-3.1 0-3.4 0-4.7.1-1 .1-1.6.2-1.9.3-.5.2-.8.4-1.1.7-.3.3-.5.6-.7 1.1-.1.3-.2.9-.3 1.9-.1 1.3-.1 1.6-.1 4.7s0 3.4.1 4.7c.1 1 .2 1.6.3 1.9.2.5.4.8.7 1.1.3.3.6.5 1.1.7.3.1.9.2 1.9.3 1.3.1 1.6.1 4.7.1s3.4 0 4.7-.1c1-.1 1.6-.2 1.9-.3.5-.2.8-.4 1.1-.7.3-.3.5-.6.7-1.1.1-.3.2-.9.3-1.9.1-1.3.1-1.6.1-4.7s0-3.4-.1-4.7c-.1-1-.2-1.6-.3-1.9-.2-.5-.4-.8-.7-1.1-.3-.3-.6-.5-1.1-.7-.3-.1-.9-.2-1.9-.3-1.3-.1-1.6-.1-4.7-.1zm0 3.4a6.4 6.4 0 1 1 0 12.8 6.4 6.4 0 0 1 0-12.8zm0 2.2a4.2 4.2 0 1 0 0 8.4 4.2 4.2 0 0 0 0-8.4zm6.8-2.5a1.5 1.5 0 1 1-3.1 0 1.5 1.5 0 0 1 3.1 0z"/>
          </svg>
        </a>
      </nav>
    </div>
      <div class="container header-inner" style="display: flex; align-items: center; justify-content: space-between;">
        <nav class="nav nav-left">
          <a href="/pages/shop.html" class="nav-link">Shop</a>
          <a href="/index.html#about" class="nav-link">Our story</a>
          <a href="/index.html#ethos" class="nav-link">Ethos</a>
          <a href="https://www.instagram.com/robynandgold/" target="_blank" rel="noopener" class="nav-link nav-link--icon" aria-label="Instagram">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M12 2.2c3.2 0 3.6 0 4.9.1 1.2.1 1.9.2 2.3.4.6.2 1 .5 1.5 1 .5.5.8.9 1 1.5.2.4.3 1.1.4 2.3.1 1.3.1 1.7.1 4.9s0 3.6-.1 4.9c-.1 1.2-.2 1.9-.4 2.3-.2.6-.5 1-1 1.5-.5.5-.9.8-1.5 1-.4.2-1.1.3-2.3.4-1.3.1-1.7.1-4.9.1s-3.6 0-4.9-.1c-1.2-.1-1.9-.2-2.3-.4-.6-.2-1-.5-1.5-1-.5-.5-.8-.9-1-1.5-.2-.4-.3-1.1-.4-2.3C2.2 15.6 2.2 15.2 2.2 12s0-3.6.1-4.9c.1-1.2.2-1.9.4-2.3.2-.6.5-1 1-1.5.5-.5.9-.8 1.5-1 .4-.2 1.1-.3 2.3-.4C8.4 2.2 8.8 2.2 12 2.2zm0 2.2c-3.1 0-3.4 0-4.7.1-1 .1-1.6.2-1.9.3-.5.2-.8.4-1.1.7-.3.3-.5.6-.7 1.1-.1.3-.2.9-.3 1.9-.1 1.3-.1 1.6-.1 4.7s0 3.4.1 4.7c.1 1 .2 1.6.3 1.9.2.5.4.8.7 1.1.3.3.6.5 1.1.7.3.1.9.2 1.9.3 1.3.1 1.6.1 4.7.1s3.4 0 4.7-.1c1-.1 1.6-.2 1.9-.3.5-.2.8-.4 1.1-.7.3-.3.5-.6.7-1.1.1-.3.2-.9.3-1.9.1-1.3.1-1.6.1-4.7s0-3.4-.1-4.7c-.1-1-.2-1.6-.3-1.9-.2-.5-.4-.8-.7-1.1-.3-.3-.6-.5-1.1-.7-.3-.1-.9-.2-1.9-.3-1.3-.1-1.6-.1-4.7-.1zm0 3.4a6.4 6.4 0 1 1 0 12.8 6.4 6.4 0 0 1 0-12.8zm0 2.2a4.2 4.2 0 1 0 0 8.4 4.2 4.2 0 0 0 0-8.4zm6.8-2.5a1.5 1.5 0 1 1-3.1 0 1.5 1.5 0 0 1 3.1 0z"/>
            </svg>
          </a>
        </nav>
        <div class="brand-banner">
          <div class="brand-center">
            <img src="../images/logo.png" alt="Robyn & Gold" />
            <a href="/" class="brand-main" style="color: var(--accent-soft);">Robyn &amp; Gold</a>
            <span class="brand-tagline">Antique Jewellery</span>
          </div>
        </div>
        <nav class="nav nav-right">
          <a href="/pages/cart.html" class="nav-link nav-link--cart" aria-label="Cart">
            <svg viewBox="0 0 24 24" width="22" height="22" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61l1.38-7.39H6"/></svg>
            <span id="cart-count" class="cart-count">0</span>
          </a>
        </nav>
      </div>
  </header>

  <main>
    <section class="section section--compact">
      <div class="container">
        <h1 class="page-title">Your chosen pieces</h1>
      </div>
    </section>

    <section class="section section--compact">
      <div class="container cart-layout">
        <div class="cart-items-wrapper">
          <div id="cart-items" class="cart-items">
            <!-- JS renders line items here -->
          </div>

          <p class="cart-empty-message" id="cart-empty-message" hidden>
            Your cart is currently empty.  
            <a href="/pages/shop.html" class="breadcrumb-link">Browse the collection</a>
          </p>
        </div>

        <aside class="cart-summary" aria-label="Order summary">
          <h2 class="cart-summary-title">Order summary</h2>
          <div class="cart-summary-row">
            <span>Subtotal</span>
            <span id="cart-subtotal">£0</span>
          </div>
          <p class="cart-summary-note">
            Shipping and any taxes are calculated at checkout.
          </p>

          <button id="checkout-button" class="btn btn-primary btn-full">
            Proceed to secure checkout
          </button>

          <p class="cart-summary-small">
            Payments are processed securely via Stripe. We never store your card details.
          </p>
        </aside>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <div class="footer-brand">
        <span class="brand-main">Robyn &amp; Gold</span>
        <span class="brand-tagline">Antique Jewellery</span>
      </div>
      <div class="footer-links">
        <a href="/pages/shop.html" class="footer-link">Shop</a>
        <a href="/index.html#about" class="footer-link">About</a>
        <a href="/index.html#ethos" class="footer-link">Ethos</a>
        <a href="/pages/contact.html" class="footer-link">Contact</a>
      </div>
      <p class="footer-meta">© <span id="year"></span> Robyn &amp; Gold. All rights reserved.</p>
    </div>
  </footer>

  <script src="../js/cart.js"></script>
  <script src="../js/stripe-integration.js"></script>
  <script src="../js/products.js"></script>
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
    
    // Render cart items
    function renderCart() {
      const cart = window.CartAPI.getCart();
      const itemsContainer = document.getElementById('cart-items');
      const emptyMessage = document.getElementById('cart-empty-message');
      const subtotalEl = document.getElementById('cart-subtotal');
      const checkoutBtn = document.getElementById('checkout-button');
      
      if (!cart || cart.length === 0) {
        itemsContainer.innerHTML = '';
        emptyMessage.hidden = false;
        subtotalEl.textContent = window.ProductsAPI.formatPrice(0, 'EUR');
        checkoutBtn.disabled = true;
        return;
      }
      
      emptyMessage.hidden = true;
      checkoutBtn.disabled = false;
      
      // Render each cart item
      itemsContainer.innerHTML = cart.map(item => `
        <div class="cart-item" data-id="${item.id}">
          <div class="cart-item-image">
            <img 
              src="${item.image}" 
              alt="${item.name}"
              onerror="this.src='../images/homepage.png'"
            />
          </div>
          <div class="cart-item-details">
            <h3 class="cart-item-title">${item.name}</h3>
            <p class="cart-item-meta">${item.era}</p>
            <p class="cart-item-price">${window.ProductsAPI.formatPrice(item.price, item.currency)}</p>
          </div>
          <button class="cart-item-remove" data-id="${item.id}" aria-label="Remove ${item.name} from cart">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M15 5L5 15M5 5L15 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
          </button>
        </div>
      `).join('');
      
      // Update subtotal
      const total = window.CartAPI.getCartTotal();
      subtotalEl.textContent = window.ProductsAPI.formatPrice(total, 'EUR');
      
      // Add remove button listeners
      document.querySelectorAll('.cart-item-remove').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const productId = e.target.dataset.id;
          window.CartAPI.removeFromCart(productId);
          renderCart();
        });
      });
    }
    
    // Setup checkout button
    document.getElementById('checkout-button').addEventListener('click', () => {
      window.StripeCheckout.initiateCheckout();
    });
    
    // Listen for cart updates
    window.addEventListener('cartUpdated', renderCart);
    
    // Initial render
    document.addEventListener('DOMContentLoaded', renderCart);
  </script>
</body>
</html>
